server:
  port: 3030
spring:
  application:
    name: api-gateway
  security:
    oauth2:
      client:
        provider:
          keycloak:
            issuer-uri: http://localhost:9999/realms/bazar-realm
            user-name-attribute: preferred_username
        registration:
          keycloak:
            provider: keycloak
            client-id: bazar-api-gateway
            client-secret: rHuv9lvG36MQsSKVxLGa0G7kReZ7UTpP
            authorization-grant-type: authorization_code
            redirect-uri: "{baseUrl}/login/oauth2/code/keycloak"
            scope: openid, profile, email
  cloud:
    gateway:
      server:
        webflux:
          routes:
            - id: bazar-space-service
              uri: http://localhost:8080
              predicates:
                - Path=/bazar-space/api/**
              filters:
                - StripPrefix=1
            - id: bazar-persona
              uri: http://localhost:8081
              predicates:
                - Path=/bazar-persona/api/**
              filters:
                - StripPrefix=1
            - id: bazar-chat
              uri: http://localhost:8082
              predicates:
                - Path=/bazar-chat/api/**
              filters:
                - StripPrefix=1
            - id: bazar-chat-ws
              uri: ws://localhost:8082
              predicates:
                - Path=/ws/bazar-chat/api/**
              filters:
                - StripPrefix=2
          default-filters:
            - TokenRelay=
logging:
  level:
    org:
      springframework:
        web: debug
